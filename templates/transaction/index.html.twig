{% extends 'base.html.twig' %}
{% import 'pagination.html.twig' as pager %}

{% block title %}{{ account.name|capitalize ~ " transactions" }}{% endblock %}

{% block body %}
    {% include '_page_header.html.twig' with {
        'back_path': path('app_account_index', {budget_id: account.budget.id}),
        'title': account.name|capitalize ~ " transactions",
        'new_path': path('app_transaction_new', {'account_id': account.id})
    } only %}

    <table class="table table-striped table-hover table-bordered">
        <thead>
            <tr>
                <th>Entry Date</th>
                <th>Category</th>
                <th>Payee</th>
                <th>Memo</th>
                <th>Credit</th>
                <th>Debit</th>
                <th>RunningBalance</th>
                <th>Cleared</th>
                <th>actions</th>
            </tr>
        </thead>
        <tbody>
        {% for transaction in transactions %}
            <tr>
                <td>{{ transaction.entryDate|date('Y-m-d') }}</td>
                <td>{{ transaction.category.name }}
                <td>{{ transaction.payee.name }}
                <td>{{ transaction.memo }}</td>
                <td>{{ transaction.credit ? transaction.credit|format_currency('USD') : '' }}</td>
                <td>{{ transaction.debit ? transaction.debit|format_currency('USD') : '' }}</td>
                <td>{{ transaction.runningBalance }}</td>
                <td>{{ transaction.cleared ? 'Yes' : 'No' }}</td>
                <td>
                    {% include '_edit_button.html.twig' with { 'edit_path': path('app_transaction_edit', {'id': transaction.id})} %}
                </td>
            </tr>
        {% else %}
            <tr>
                <td colspan="9">no records found</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
    <div class="float-end">
        <twig:Pagination :total="pagesCount" :path="path('app_transaction_index', { 'account_id': account.id, 'itemsPerPage': itemsPerPage, 'page': '' })" :current="page" />
    </div>
{% endblock %}
